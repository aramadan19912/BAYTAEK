<div class="favorites-container">
  <div class="favorites-header">
    <h1>{{ 'favorites.title' | translate }}</h1>
    <p class="subtitle">{{ 'favorites.subtitle' | translate }}</p>
  </div>

  @if (loading) {
    <div class="loading-container">
      <mat-spinner></mat-spinner>
    </div>
  } @else if (favorites.length === 0) {
    <div class="empty-state">
      <mat-icon>favorite_border</mat-icon>
      <h2>{{ 'favorites.noFavorites' | translate }}</h2>
      <p>{{ 'favorites.noFavoritesDesc' | translate }}</p>
      <button mat-raised-button color="primary" routerLink="/services">
        {{ 'favorites.browseServices' | translate }}
      </button>
    </div>
  } @else {
    <div class="favorites-grid">
      @for (favorite of favorites; track favorite.serviceId) {
        <mat-card class="service-card">
          <div class="card-image">
            <img [src]="favorite.service?.imageUrl || '/assets/images/placeholder.jpg'" [alt]="favorite.service?.name">
            <app-favorite-button
              [serviceId]="favorite.serviceId"
              [isFavorite]="true"
              (favoriteToggle)="onRemoveFavorite(favorite.serviceId)">
            </app-favorite-button>
          </div>
          <mat-card-content>
            <h3>{{ favorite.service?.name }}</h3>
            <p class="provider">
              <mat-icon>business</mat-icon>
              {{ favorite.service?.providerName }}
            </p>
            <div class="rating">
              <mat-icon>star</mat-icon>
              <span>{{ favorite.service?.rating || 0 }}</span>
              <span class="reviews">({{ favorite.service?.reviewCount || 0 }})</span>
            </div>
            <p class="price">{{ favorite.service?.price | currency:'USD':'symbol':'1.2-2' }}</p>
          </mat-card-content>
          <mat-card-actions>
            <button mat-button (click)="viewService(favorite.serviceId)">
              <mat-icon>visibility</mat-icon>
              {{ 'common.view' | translate }}
            </button>
            <button mat-raised-button color="primary" (click)="viewService(favorite.serviceId)">
              <mat-icon>event</mat-icon>
              {{ 'services.book_now' | translate }}
            </button>
          </mat-card-actions>
        </mat-card>
      }
    </div>
  }
</div>
