<div class="home-container">
  <!-- Header Section -->
  <header class="home-header">
    <div class="location-section">
      <span class="location-icon">ğŸ“</span>
      <span class="location-text">{{ currentLocation }}</span>
      <button class="change-location-btn" (click)="changeLocation()">Change</button>
    </div>
    <div class="header-actions">
      <button class="notification-btn">
        ğŸ””
        <span class="badge" *ngIf="notificationCount > 0">{{ notificationCount }}</span>
      </button>
      <button class="profile-btn" routerLink="/profile">
        <img src="assets/images/default-avatar.png" alt="Profile" class="profile-avatar">
      </button>
    </div>
  </header>

  <!-- Search Bar Section -->
  <section class="search-section">
    <div class="search-container">
      <input
        type="text"
        [(ngModel)]="searchQuery"
        (keyup.enter)="onSearch()"
        placeholder="{{ 'home.search_placeholder' | translate }}"
        class="search-input"
      >
      <button class="voice-search-btn">ğŸ¤</button>
      <button class="search-btn" (click)="onSearch()">ğŸ”</button>
    </div>
    <div class="recent-searches" *ngIf="recentSearches.length > 0">
      <span class="recent-label">Recent:</span>
      <span
        *ngFor="let search of recentSearches"
        class="recent-search-tag"
        (click)="searchQuery = search; onSearch()"
      >
        {{ search }}
      </span>
    </div>
  </section>

  <!-- Promotional Banner/Carousel Section -->
  <section class="promo-carousel">
    <div class="carousel-container">
      <div
        class="carousel-track"
        [style.transform]="'translateX(-' + (currentBannerIndex * 100) + '%)'"
      >
        <div
          *ngFor="let banner of promoBanners"
          class="carousel-slide"
          [routerLink]="banner.link"
        >
          <div class="banner-content">
            <h3>{{ banner.title }}</h3>
            <p>{{ banner.description }}</p>
          </div>
        </div>
      </div>
      <button class="carousel-btn prev" (click)="previousBanner()">â€¹</button>
      <button class="carousel-btn next" (click)="nextBanner()">â€º</button>
      <div class="carousel-indicators">
        <span
          *ngFor="let banner of promoBanners; let i = index"
          class="indicator"
          [class.active]="i === currentBannerIndex"
          (click)="goToBanner(i)"
        ></span>
      </div>
    </div>
  </section>

  <!-- Service Categories Section -->
  <section class="categories-section">
    <div class="section-header">
      <h2>{{ 'home.service_categories' | translate }}</h2>
      <a routerLink="/services" class="view-all-link">{{ 'common.view_all' | translate }}</a>
    </div>
    <div class="categories-grid">
      <a
        *ngFor="let category of categories"
        [routerLink]="category.route"
        class="category-card"
      >
        <div class="category-icon">{{ category.icon }}</div>
        <div class="category-name">{{ category.name }}</div>
      </a>
    </div>
  </section>

  <!-- Featured Services Section -->
  <section class="featured-services-section">
    <div class="section-header">
      <h2>{{ 'home.featured_services' | translate }}</h2>
      <a routerLink="/services" class="view-all-link">{{ 'common.view_all' | translate }}</a>
    </div>
    <div class="services-scroll">
      <div
        *ngFor="let service of featuredServices"
        class="service-card"
        routerLink="/services/{{ service.id }}"
      >
        <div class="service-image">
          <img [src]="service.imageUrl" [alt]="service.name" loading="lazy">
        </div>
        <div class="service-info">
          <h3 class="service-name">{{ service.name }}</h3>
          <div class="service-rating">
            <span *ngFor="let star of getStarArray(service.rating)" class="star filled">â˜…</span>
            <span *ngFor="let star of getStarArray(5 - service.rating)" class="star">â˜…</span>
            <span class="rating-text">{{ service.rating }} ({{ service.reviewCount }})</span>
          </div>
          <div class="service-price">
            <span class="price-label">Starting from</span>
            <span class="price">{{ service.price }} SAR</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Recent Bookings Section (for logged-in users) -->
  <section class="recent-bookings-section" *ngIf="isLoggedIn && recentBookings.length > 0">
    <div class="section-header">
      <h2>{{ 'home.recent_bookings' | translate }}</h2>
      <a routerLink="/bookings" class="view-all-link">{{ 'common.view_all' | translate }}</a>
    </div>
    <div class="bookings-list">
      <div *ngFor="let booking of recentBookings" class="booking-card">
        <div class="booking-info">
          <h4>{{ booking.serviceName }}</h4>
          <p class="provider-name">{{ booking.providerName }}</p>
          <p class="booking-date">{{ booking.scheduledDate | date: 'short' }}</p>
        </div>
        <div class="booking-actions">
          <span class="status-badge" [class]="'status-' + booking.status.toLowerCase()">
            {{ booking.status }}
          </span>
          <button class="book-again-btn" (click)="bookAgain(booking.id)">
            {{ 'home.book_again' | translate }}
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Bottom Navigation Bar (Mobile) -->
  <nav class="bottom-nav">
    <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-item">
      <span class="nav-icon">ğŸ </span>
      <span class="nav-label">{{ 'nav.home' | translate }}</span>
    </a>
    <a routerLink="/bookings" routerLinkActive="active" class="nav-item">
      <span class="nav-icon">ğŸ“‹</span>
      <span class="nav-label">{{ 'nav.bookings' | translate }}</span>
      <span class="nav-badge" *ngIf="isLoggedIn">2</span>
    </a>
    <a routerLink="/messages" routerLinkActive="active" class="nav-item">
      <span class="nav-icon">ğŸ’¬</span>
      <span class="nav-label">{{ 'nav.messages' | translate }}</span>
      <span class="nav-badge">3</span>
    </a>
    <a routerLink="/profile" routerLinkActive="active" class="nav-item">
      <span class="nav-icon">ğŸ‘¤</span>
      <span class="nav-label">{{ 'nav.profile' | translate }}</span>
    </a>
  </nav>

  <!-- Location Picker Modal -->
  <app-location-picker
    (locationSelected)="onLocationSelected($event)"
  ></app-location-picker>
</div>
